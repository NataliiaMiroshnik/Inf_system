У першому завданні були дві функції calculate_total_price та calculate_total_price_with_tax, які мали дублюючий код для обчислення загальної ціни з або без знижки. Щоб позбутися дублювання дві функції були об'єднанні в одну, яка приймає додатковий параметр tax_rate. Тепер ця функція може обчислювати загальну ціну з урахуванням знижки та податку.

Крім того, був використанний генератор списку та функція sum для спрощення коду. Генератор списку обчислює ціну для кожного продукту, застосовуючи знижку, якщо це необхідно. Функція sum підсумовує всі ці ціни. Потім результат множиться на (1 + tax_rate), щоб врахувати податок.


У другому завданні клас DataAnalyzer містив дублювання коду в методах calculate_total та calculate_average. Обидва ці методи викликали приватну функцію _calculate_total_and_count для обчислення суми та кількості елементів у даних.

Для усунення дублювання були змінені методи calculate_total та calculate_average так, щоб вони використовували результат _calculate_total_and_count безпосередньо. Тепер calculate_total просто повертає першу частину результату (суму), а calculate_average ділить суму на кількість елементів, якщо вона не дорівнює нулю.